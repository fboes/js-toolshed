!function(a){"use strict";a.fn.html5form=function(b,c){return this.each(function(){var d={el:null,strings:{},numbers:{},init:function(c){var d=this,e=c.find(":input");this.el=c,e.each(function(){var b=a(this);d.getValue(b),b.attr("type")||"select";b.attr("required")&&b.closest(".form-field").addClass("required")}),void 0!==b&&b.call(this),c.on("click.html5form","[type='reset']",function(f){f.preventDefault(),c.trigger("reset"),d.validate(a(this)),e.each(function(){d.validate(a(this))}),void 0!==b&&b.call(d)}).on("change.html5form keyup.html5form blur.html5form input.html5form",":input",function(c){c.stopPropagation(),d.validate(a(this)),void 0!==b&&b.call(d)}).on("submit.html5form",function(c){var f=!1;e.each(function(){f&=d.validate(a(this))}),f&&(c.preventDefault(),void 0!==console&&console.error("Prevent form from submitting due to errors")),void 0!==b&&b.call(d)})},validate:function(a){var b=this.getValue(a),c=[],d=a.closest(".form-field"),e=a.data("output"),f=a.prop("validity");return e&&this.setValueById(e,b),a.attr("novalidate")?!0:(void 0!==f?f.valid||c.push("validity"):b?"number"===a.attr("type")||"range"===a.attr("type")?(b=Number(b),a.attr("min")&&b<Number(a.attr("min"))&&c.push("rangeUnderflow"),a.attr("max")&&b>Number(a.attr("max"))&&c.push("rangeOverflow"),a.attr("step")&&1e3*b%(1e3*Number(a.attr("step")))&&c.push("stepMismatch")):(a.attr("maxlength")&&b.length>parseInt(a.attr("maxlength"))&&c.push("tooLong"),a.attr("pattern")&&!b.match(new RegExp("^"+a.attr("pattern")+"$"))&&c.push("patternMismatch")):a.attr("required")&&c.push("valueMissing"),a.data("pattern")&&!b.match(new RegExp("^"+a.data("pattern")+"$"))&&c.push("patternMismatch"),c.length>0?(void 0!==console&&console.error("Validation error",a,c),d.addClass("error"),d.data("error",c.join(" ")),!1):(d.removeClass("error"),d.data("error",""),!0))},getValue:function(a){var b=a.val(),c=a.attr("type")||"select";return("checkbox"===c||"radio"===c)&&(b=a.closest(".form-field").find(":checked").val()),this._setValue(a.attr("name"),b,c),b},setValue:function(a,b){return a.val(b),this._setValue(a.attr("name"),b,a.attr("type")),a},_setValue:function(a,b,c){var d;if("date"===c){var e=b.split(/[^\d]/);d=Math.round(new Date(e[0],e[1],e[2]).getTime()/1e3)}else if("time"===c){var f=b.split(/[^\d]/);d=60*Number(f[0])+Number(f[1])}else d=Number(b);return this.strings[a]=b,isNaN(d)||(this.numbers[a]=d),this},setValueById:function(b,d){var e=a("#"+b);return e.length&&(e.is(":input")?this.setValue(e,d):(void 0!==c&&(d=String(d).replace(/\./,c)),e.html(d))),e},hasError:function(){return this.el.find(".form-field.error").length>0}};d.init(a(this))})},a.fn.toggleRequired=function(b){return this.each(function(){void 0===b&&(b=a(this).attr("required")),b?(a(this).removeAttr("required"),a(this).closest(".form-field").removeClass("required")):(a(this).attr("required","required"),a(this).closest(".form-field").addClass("required"))})}}(jQuery);