!function(t){"use strict";t.fn.html5form=function(e,r,a){return this.each(function(){({el:null,strings:{},numbers:{},init:function(r){var a=this,i=r.find(":input");this.el=r,i.each(function(){var e=t(this);a.getValue(e),e.attr("type");e.attr("required")&&e.closest(".form-field").addClass("required")}),void 0!==e&&e.call(this),r.on("click.html5form","[type='reset']",function(n){n.preventDefault(),r.trigger("reset"),a.validate(t(this)),i.each(function(){a.validate(t(this))}),void 0!==e&&e.call(a)}).on("change.html5form keyup.html5form blur.html5form input.html5form",":input",function(r){r.stopPropagation(),a.validate(t(this)),void 0!==e&&e.call(a)}).on("submit.html5form",function(r){var n=!1;i.each(function(){n&=a.validate(t(this))}),n&&(r.preventDefault(),void 0!==console&&console.error("Prevent form from submitting due to errors")),void 0!==e&&e.call(a)})},validate:function(t){var e=this.getValue(t),r=[],a=t.closest(".form-field"),i=t.data("output"),n=t.prop("validity");return i&&this.setValueById(i,e),!!t.attr("novalidate")||(void 0!==n?n.valid||r.push("validity"):e?"number"===t.attr("type")||"range"===t.attr("type")?(e=Number(e),t.attr("min")&&e<Number(t.attr("min"))&&r.push("rangeUnderflow"),t.attr("max")&&e>Number(t.attr("max"))&&r.push("rangeOverflow"),t.attr("step")&&1e3*e%(1e3*Number(t.attr("step")))&&r.push("stepMismatch")):(t.attr("maxlength")&&e.length>parseInt(t.attr("maxlength"))&&r.push("tooLong"),t.attr("pattern")&&!e.match(new RegExp("^"+t.attr("pattern")+"$"))&&r.push("patternMismatch")):t.attr("required")&&r.push("valueMissing"),t.data("pattern")&&!e.match(new RegExp("^"+t.data("pattern")+"$"))&&r.push("patternMismatch"),r.length>0?(void 0!==console&&console.error("Validation error",t,r),a.addClass("error"),a.data("error",r.join(" ")),!1):(a.removeClass("error"),a.data("error",""),!0))},getValue:function(e){var r=e.val(),a=e.attr("type")||"select";return"radio"===a?r=e.closest(".form-field").find(":checked").val():"checkbox"===a&&(r=[],e.closest(".form-field").find(":checked").each(function(){r.push(t(this).val())})),this._setValue(e.attr("name"),r,a),r},setValue:function(t,e){return t.val(e),this._setValue(t.attr("name"),e,t.attr("type")),t},_setValue:function(t,e,r){var a;switch(r){case"date":case"month":case"datetime-local":var i=e.split(/[^\d]/);void 0===i[2]&&(i[2]=0),void 0===i[3]&&(i[3]=0),void 0===i[4]&&(i[4]=0),a=Math.round(new Date(i[0],i[1],i[2],i[3],i[4]).getTime()/1e3);break;case"time":var n=e.split(/[^\d]/);a=60*Number(n[0])+Number(n[1]);break;default:a=e.constructor===Array?e.reduce(function(t,e){return Number(t)+Number(e)},0):Number(e)}return this.strings[t]=e,isNaN(a)||(this.numbers[t]=a),this},setValueById:function(e,i){var n=t("#"+e);return n.length&&(n.is(":input")?this.setValue(n,i):(void 0!==r&&(i=String(i).replace(/\./,r)),void 0!==a&&(i=String(i).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+a)),n.html(i))),n},hasError:function(){return this.el.find(".form-field.error").length>0}}).init(t(this))})},t.fn.toggleRequired=function(e){return this.each(function(){void 0===e&&(e=t(this).attr("required")),e?(t(this).removeAttr("required"),t(this).closest(".form-field").removeClass("required")):(t(this).attr("required","required"),t(this).closest(".form-field").addClass("required"))})}}(jQuery);